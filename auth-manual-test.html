<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentication Test</title>
</head>
<body>
    <h1>Authentication Test</h1>
    
    <div>
        <h2>Step 1: Clear All Sessions</h2>
        <button onclick="clearEverything()">Clear All Storage</button>
        <div id="clear-status"></div>
    </div>
    
    <div>
        <h2>Step 2: Test Pages (should require login)</h2>
        <a href="contacts.html" target="_blank">Open Contacts Page</a><br>
        <a href="calendar.html" target="_blank">Open Calendar Page</a><br>
        <a href="login-details.html" target="_blank">Open Login Details Page</a>
    </div>
    
    <div>
        <h2>Step 3: Check Current Session Status</h2>
        <button onclick="checkStatus()">Check Session Status</button>
        <div id="session-status"></div>
    </div>

    <script>
        function clearEverything() {
            sessionStorage.clear();
            localStorage.clear();
            document.getElementById('clear-status').innerHTML = '<p style="color: green;">âœ… All storage cleared!</p>';
        }

        function checkStatus() {
            const session = sessionStorage.getItem('precision_auth_session');
            const pageAccess = sessionStorage.getItem('precision_page_access');
            
            document.getElementById('session-status').innerHTML = `
                <div style="background: #f0f0f0; padding: 10px; margin: 10px 0;">
                    <p><strong>Session:</strong> ${session || 'null'}</p>
                    <p><strong>Page Access:</strong> ${pageAccess || 'null'}</p>
                    <p><strong>Should Require Login:</strong> ${!session || session !== 'authenticated' ? 'YES' : 'NO'}</p>
                </div>
            `;
        }

        // Check status on load
        checkStatus();
    </script>
</body>
</html>
