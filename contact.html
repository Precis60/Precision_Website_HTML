<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact | Precision Cabling & Automation</title>
    <link rel="stylesheet" href="styles.css">
    <!-- EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>

<body>
    <div class="header">
        <!-- Desktop Header Structure -->
        <div class="desktop-logo-text">
            <a href="index.html" class="logo">
                <img src="images/logo.jpg" alt="Precision Cabling & Automation Logo" class="logo-img">
                <span class="logo-text">Precision Cabling & Automation</span>
            </a>
        </div>

        <!-- Mobile Header Structure -->
        <div class="mobile-company-name">
            <span class="logo-text">Precision Cabling & Automation</span>
        </div>
        <div class="logo-and-menu-row">
            <a href="index.html" class="logo">
                <img src="images/logo.jpg" alt="Precision Cabling & Automation Logo" class="logo-img">
            </a>
            <button class="menu-toggle" id="menuToggle">â˜° Menu</button>
        </div>

        <!-- Navigation Links (for dropdown) -->
        <div class="header-right" id="dropdownMenu">
            <a href="index.html">Home</a>
            <a href="services.html">Services</a>
            <a href="about.html">Privacy Policy</a>
            <a href="support.html">Support</a>
            <a href="faq.html">FAQ</a>
            <a class="active" href="contact.html">Contact Us</a>
        </div>
    </div>

    <main>
        <section class="section-bg">
            <section class="content-section">
                <div class="content-container">
                    <h3 class="section-title">Contact Us</h3>
                    <p class="section-content">
                        Have a question or want to discuss your next project? Get in touch:
                    </p>
                    <div class="contact-details">
                        <p class="support-description"><strong>Email:</strong> precis60@precisionautomation.org</p>
                        <p class="support-description"><strong>Phone:</strong> 0413 729 663</p>
                        <p class="support-description"><strong>Address:</strong> 15a Hawkhurst Street, Yarraville, VIC 3013</p>
                    </div>
                </div>
            </section>
        </section>

        <section class="section-bg">
            <section class="content-section">
                <div class="content-container">
                    <h3 class="section-title">New Client Registration</h3>
                    <p class="section-content">New to Precision Cabling & Automation? Register your details below and we'll get in touch to discuss your project requirements:</p>
                    
                    <form id="clientRegistrationForm" class="registration-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="firstName">First Name *</label>
                                <input type="text" id="firstName" name="firstName" required>
                            </div>
                            <div class="form-group">
                                <label for="lastName">Last Name *</label>
                                <input type="text" id="lastName" name="lastName" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="email">Email Address *</label>
                                <input type="email" id="email" name="email" required>
                            </div>
                            <div class="form-group">
                                <label for="phone">Phone Number *</label>
                                <input type="tel" id="phone" name="phone" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="company">Company Name</label>
                                <input type="text" id="company" name="company">
                            </div>
                            <div class="form-group">
                                <label for="position">Position/Role</label>
                                <input type="text" id="position" name="position">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="address">Address</label>
                            <textarea id="address" name="address" rows="3" placeholder="Full address including suburb, state, and postcode"></textarea>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="serviceType">Service Required *</label>
                                <select id="serviceType" name="serviceType" required>
                                    <option value="">Select a service</option>
                                    <option value="structured-cabling">Structured Cabling</option>
                                    <option value="network-design">Network Design & Implementation</option>
                                    <option value="security-access">Security & Access Control</option>
                                    <option value="cctv-intercom">CCTV & Intercom Systems</option>
                                    <option value="electrical-automation">Electrical & Automation</option>
                                    <option value="network-it">Network & IT Services</option>
                                    <option value="consultation">General Consultation</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="projectScale">Project Scale</label>
                                <select id="projectScale" name="projectScale">
                                    <option value="">Select scale</option>
                                    <option value="residential">Residential</option>
                                    <option value="small-business">Small Business</option>
                                    <option value="medium-business">Medium Business</option>
                                    <option value="enterprise">Large Enterprise</option>
                                    <option value="industrial">Industrial</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="budget">Estimated Budget Range</label>
                                <select id="budget" name="budget">
                                    <option value="">Select budget range</option>
                                    <option value="under-5k">Under $5,000</option>
                                    <option value="5k-15k">$5,000 - $15,000</option>
                                    <option value="15k-50k">$15,000 - $50,000</option>
                                    <option value="50k-100k">$50,000 - $100,000</option>
                                    <option value="over-100k">Over $100,000</option>
                                    <option value="discuss">Prefer to discuss</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="timeline">Project Timeline</label>
                                <select id="timeline" name="timeline">
                                    <option value="">Select timeline</option>
                                    <option value="urgent">Urgent (Within 2 weeks)</option>
                                    <option value="1month">Within 1 month</option>
                                    <option value="3months">Within 3 months</option>
                                    <option value="6months">Within 6 months</option>
                                    <option value="flexible">Flexible</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="projectDescription">Project Description *</label>
                            <textarea id="projectDescription" name="projectDescription" rows="4" placeholder="Please describe your project requirements, current setup, and any specific needs or challenges" required></textarea>
                        </div>

                        <div class="form-group">
                            <label for="hearAboutUs">How did you hear about us?</label>
                            <select id="hearAboutUs" name="hearAboutUs">
                                <option value="">Select an option</option>
                                <option value="google">Google Search</option>
                                <option value="referral">Referral from client</option>
                                <option value="social-media">Social Media</option>
                                <option value="trade-directory">Trade Directory</option>
                                <option value="repeat-client">Returning Client</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <div class="form-group checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="newsletter" name="newsletter">
                                <span class="checkmark"></span>
                                I would like to receive updates about services and industry news
                            </label>
                        </div>

                        <div class="form-group checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="terms" name="terms" required>
                                <span class="checkmark"></span>
                                I agree to the <a href="about.html" target="_blank">Privacy Policy</a> and consent to being contacted about this inquiry *
                            </label>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Submit Registration</button>
                            <button type="reset" class="btn btn-secondary">Clear Form</button>
                            <button type="button" class="btn btn-alternative" id="mailtoFallback" style="display:none;">Send via Email Client</button>
                        </div>
                    </form>
                </div>
            </section>
        </section>
    </main>
    <footer class="site-footer">
        <div class="footer-content">
            <span>Precision Cabling & Automation | ABN: 94 921 400 822 | Mobile: 0413 729 663</span>
            <span><a href="contact.html" class="footer-link">Contact Us</a> | <a href="about.html" class="footer-link">Privacy Policy</a></span>
        </div>
    </footer>
    <script>
        document.getElementById('menuToggle').addEventListener('click', function () {
            var menu = document.getElementById('dropdownMenu');
            menu.classList.toggle('open');
        });

        // Initialize EmailJS
        (function() {
            // TODO: Replace 'YOUR_PUBLIC_KEY' with your actual EmailJS public key from https://www.emailjs.com/
            emailjs.init("YOUR_PUBLIC_KEY"); // Get this from EmailJS dashboard
        })();

        // Client Registration Form Handler
        document.getElementById('clientRegistrationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Show loading state
            const submitBtn = document.querySelector('.btn-primary');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Sending...';
            submitBtn.disabled = true;
            
            // Get form data
            const formData = new FormData(this);
            const registrationData = {
                timestamp: new Date().toLocaleString('en-AU', { timeZone: 'Australia/Melbourne' }),
                firstName: formData.get('firstName'),
                lastName: formData.get('lastName'),
                email: formData.get('email'),
                phone: formData.get('phone'),
                company: formData.get('company') || 'Not provided',
                position: formData.get('position') || 'Not provided',
                address: formData.get('address') || 'Not provided',
                serviceType: formData.get('serviceType'),
                projectScale: formData.get('projectScale') || 'Not specified',
                budget: formData.get('budget') || 'Not specified',
                timeline: formData.get('timeline') || 'Not specified',
                projectDescription: formData.get('projectDescription'),
                hearAboutUs: formData.get('hearAboutUs') || 'Not specified',
                newsletter: formData.get('newsletter') === 'on' ? 'Yes' : 'No'
            };

            // Prepare email template parameters
            const templateParams = {
                to_email: 'precis60@precisionautomation.org',
                from_name: `${registrationData.firstName} ${registrationData.lastName}`,
                client_name: `${registrationData.firstName} ${registrationData.lastName}`,
                client_email: registrationData.email,
                client_phone: registrationData.phone,
                client_company: registrationData.company,
                client_position: registrationData.position,
                client_address: registrationData.address,
                service_type: registrationData.serviceType,
                project_scale: registrationData.projectScale,
                budget_range: registrationData.budget,
                timeline: registrationData.timeline,
                project_description: registrationData.projectDescription,
                hear_about_us: registrationData.hearAboutUs,
                newsletter_subscription: registrationData.newsletter,
                submission_date: registrationData.timestamp,
                subject: `New Client Registration from ${registrationData.firstName} ${registrationData.lastName}`
            };

            // Send email using EmailJS
            // TODO: Replace 'YOUR_SERVICE_ID' and 'YOUR_TEMPLATE_ID' with actual values from EmailJS dashboard
            emailjs.send('YOUR_SERVICE_ID', 'YOUR_TEMPLATE_ID', templateParams)
                .then(function(response) {
                    console.log('SUCCESS!', response.status, response.text);
                    
                    // Store in localStorage as backup
                    let registrations = JSON.parse(localStorage.getItem('clientRegistrations') || '[]');
                    registrations.push(registrationData);
                    localStorage.setItem('clientRegistrations', JSON.stringify(registrations));

                    // Show success message
                    alert('Thank you for registering! Your details have been sent to our team. We will contact you within 24 hours to discuss your project requirements.');
                    
                    // Reset form
                    document.getElementById('clientRegistrationForm').reset();
                    
                    // Scroll to top
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    
                }, function(error) {
                    console.log('FAILED...', error);
                    
                    // Store in localStorage as fallback
                    let registrations = JSON.parse(localStorage.getItem('clientRegistrations') || '[]');
                    registrations.push(registrationData);
                    localStorage.setItem('clientRegistrations', JSON.stringify(registrations));
                    
                    // Show fallback button
                    document.getElementById('mailtoFallback').style.display = 'inline-block';
                    document.getElementById('mailtoFallback').onclick = () => sendViaMailto(registrationData);
                    
                    alert('We encountered an issue sending the email automatically. Please use the "Send via Email Client" button below, or contact us directly at precis60@precisionautomation.org or call 0413 729 663.');
                })
                .finally(function() {
                    // Reset button state
                    submitBtn.textContent = originalText;
                    submitBtn.disabled = false;
                });
        });

        // Alternative: Mailto fallback function
        function sendViaMailto(registrationData) {
            const subject = encodeURIComponent(`New Client Registration from ${registrationData.firstName} ${registrationData.lastName}`);
            const body = encodeURIComponent(`
Client Registration Details:

Name: ${registrationData.firstName} ${registrationData.lastName}
Email: ${registrationData.email}
Phone: ${registrationData.phone}
Company: ${registrationData.company}
Position: ${registrationData.position}
Address: ${registrationData.address}

Service Required: ${registrationData.serviceType}
Project Scale: ${registrationData.projectScale}
Budget Range: ${registrationData.budget}
Timeline: ${registrationData.timeline}

Project Description:
${registrationData.projectDescription}

How they heard about us: ${registrationData.hearAboutUs}
Newsletter subscription: ${registrationData.newsletter}

Submitted: ${registrationData.timestamp}
            `);
            
            const mailtoLink = `mailto:precis60@precisionautomation.org?subject=${subject}&body=${body}`;
            window.open(mailtoLink, '_blank');
        }

        // Form validation enhancement
        document.getElementById('email').addEventListener('blur', function() {
            const email = this.value;
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (email && !emailRegex.test(email)) {
                this.setCustomValidity('Please enter a valid email address');
            } else {
                this.setCustomValidity('');
            }
        });

        document.getElementById('phone').addEventListener('blur', function() {
            const phone = this.value.replace(/\s/g, '');
            const phoneRegex = /^(\+61|0)[2-9]\d{8}$/;
            if (phone && !phoneRegex.test(phone)) {
                this.setCustomValidity('Please enter a valid Australian phone number');
            } else {
                this.setCustomValidity('');
            }
        });
    </script>
</body>

</html>
